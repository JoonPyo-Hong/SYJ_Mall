<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">



<mapper namespace="popuarItem">
	
	
	
	<!-- 인기상품 진열 sp -->	
	<select id="popularProductList" resultType="com.test.SYJ_Mall.popularItem.PopularItemDTO"  parameterType="com.test.SYJ_Mall.popularItem.PopularPagingDTO" statementType="CALLABLE" >
		{
			call dbo.kakao_popular_product_list (#{paging},#{userSeq},#{basketList})
		}
	</select>
	
	
	<!-- 회원이 선택한 아이템 장바구니에 넣어주기 -->
	<select id="itemInputBasket" resultType="Integer"  parameterType="java.util.HashMap" statementType="CALLABLE" >
		
		declare @result int
		exec dbo.kakao_popular_product_input_basket #{userSeq},#{productId},@result output
		select @result
				
	</select>
	
	<!-- 회원이 선택한 아이템 장바구니에서 빼주기 -->
	<select id="itemOutputBasket" resultType="Integer"  parameterType="java.util.HashMap" statementType="CALLABLE" >
		
		declare @result int
		exec dbo.kakao_popular_product_output_basket #{userSeq},#{productId},@result output
		select @result
				
	</select>
	
	
	<!-- 회원의 장바구니에 존재하는 물품리스트를 가져와준다. -->
	<select id="getCookieProductId" resultType="com.test.SYJ_Mall.popularItem.UserProductDTO"  parameterType="java.util.HashMap" statementType="CALLABLE" >
		{
			call dbo.kakao_cookie_product_user_nohave (#{userSeq})
		}
				
	</select>
	
	
	<!-- 쿠키에존재하는 상품 회원의 디비로 모두 넣어주기 회원이 한번도 지웠던적 없는 목록-->
	<select id="setCookieToDbBasketListNondeleted" resultType="Integer"  parameterType="java.util.HashMap" statementType="CALLABLE" >
		
		declare @result int
		exec dbo.kakao_cookie_product_to_db_notdelete #{userSeq},#{productId},@result output
		select @result
				
	</select>
	
	
	<!-- 쿠키에존재하는 상품 회원의 디비로 모두 넣어주기 회원이 지운적이 있는 목록-->
	<select id="setCookieToDbBasketListDeleted" resultType="Integer"  parameterType="java.util.HashMap" statementType="CALLABLE" >
		
		declare @result int
		exec dbo.kakao_cookie_product_to_db_delete #{userSeq},#{productId},@result output
		select @result
				
	</select>
	
	

	

</mapper>